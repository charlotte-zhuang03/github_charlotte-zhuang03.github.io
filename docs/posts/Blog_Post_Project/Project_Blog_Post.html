<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>My Awesome CSCI 0451 Blog - Project Blog Post</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner {
      color: white;
background-image: url(../../img/landscape.png);
background-size: cover;
    }
    </style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Awesome CSCI 0451 Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Project Blog Post</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="abstract" class="level3">
<h3 class="anchored" data-anchor-id="abstract">1. Abstract</h3>
<p><strong>Note: Sally and I write the first seven sections of the blog post as a group.</strong></p>
<p>Our project aims to predict the energy consumption in Spain. We used the Linear Regression Model and Univariate Time Series Analysis to predict the energy consumption. By comparing the accuracy scores the two models achieved, we found that univariate time series analysis could perform better in forecasting than linear model.</p>
<p>Link to GitHub Repository: https://github.com/Sallyliubj/Energy-Consumption-Forecast/blob/main/Energy_Consumption_Blog_Post.ipynb</p>
</section>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">2. Introduction</h3>
<p>Due to climate change and modernization, people use more energy than before. This may potentially bring a burden to our environment (as more energy will need to be produced), seeing an increase in utility expenses related to energy consumption while affecting our energy generation plans.</p>
<p>According to the 2019 paper “Tackling Climate Change with Machine Learning”, forecasting in energy markets is one of the most impactful areas where machine learning can contribute to the transition towards a renewable-based electrical infrastructure <span class="citation" data-cites="10.1145/3485128">(<a href="#ref-10.1145/3485128" role="doc-biblioref">Rolnick et al. 2022</a>)</span>. We think that we could possibly use Machine Learning techniques to predict patterns of energy consumption in order to facilitate energy management, energy generation and potentially, energy-related policy-making so as to bring benefits and efficiency to our environment and society.</p>
<p>Various machine learning algorithms can be adopted to predict energy consumption patterns. Jui-Sheng Chou and Duc-Son Tran mentioned several models in their paper “Forecasting energy consumption time series using machine learning techniques based on usage patterns of residential householders”, such as linear regression models, due to their ease of use, and time series analysis, which is more dynamic and can consider patterns related to certain times of the day, and even year <span class="citation" data-cites="CHOU2018709">(<a href="#ref-CHOU2018709" role="doc-biblioref">Chou and Tran 2018</a>)</span>.</p>
<p>We expect to adopt some machine learning algorithms in predicting energy consumption and compare their performances.</p>
</section>
<section id="values-statement" class="level3">
<h3 class="anchored" data-anchor-id="values-statement">3. Values Statement</h3>
<section id="who-are-the-potential-users-of-your-project-who-other-than-your-users-might-still-be-affected-by-your-project" class="level5">
<h5 class="anchored" data-anchor-id="who-are-the-potential-users-of-your-project-who-other-than-your-users-might-still-be-affected-by-your-project">Who are the potential users of your project? Who, other than your users, might still be affected by your project?</h5>
<ul>
<li>People who seek to reduce their energy consumption or expenditure on energy</li>
<li>Government or social organizations related to energy.</li>
<li>Environmental activists.</li>
</ul>
</section>
<section id="who-benefits-from-technology-that-solves-the-problem-you-address" class="level5">
<h5 class="anchored" data-anchor-id="who-benefits-from-technology-that-solves-the-problem-you-address">Who benefits from technology that solves the problem you address?</h5>
<ul>
<li>The common public who consume energy in daily life.</li>
<li>Government and energy-related social organizations.</li>
</ul>
</section>
<section id="who-could-be-harmed-from-technology-that-solves-the-problem-you-well-address" class="level5">
<h5 class="anchored" data-anchor-id="who-could-be-harmed-from-technology-that-solves-the-problem-you-well-address">Who could be harmed from technology that solves the problem you well address?</h5>
<ul>
<li>If companies try to earn more revenues by raising unit electricity price according to the energy consumption prediction, then households will be harmed.</li>
<li>The prediction might not be applicable to people in some other regions (e.g.&nbsp;prediction based on data from developed countries may not be applicable to undeveloped ones; predictions based on urban areas may not be applicable to rural areas.)</li>
</ul>
</section>
<section id="what-is-your-personal-reason-for-working-on-this-problem" class="level5">
<h5 class="anchored" data-anchor-id="what-is-your-personal-reason-for-working-on-this-problem">What is your personal reason for working on this problem?</h5>
<ul>
<li><p>We want to explore the wider applications of machine learning in real life. With concern about our environment and the energy crisis that is impacting the whole world, we hope to contribute to the saving of energy and inform people to pay more attention to energy consumption.</p></li>
<li><p>The result of our project may be used to assist in energy management, reduce utility expenditure, and facilitate energy-related decision and policy making.</p></li>
</ul>
</section>
<section id="based-on-your-reflection-would-the-world-be-a-more-equitable-just-joyful-peaceful-or-sustainable-place-based-on-the-technology-that-you-implemented" class="level5">
<h5 class="anchored" data-anchor-id="based-on-your-reflection-would-the-world-be-a-more-equitable-just-joyful-peaceful-or-sustainable-place-based-on-the-technology-that-you-implemented">Based on your reflection, would the world be a more equitable, just, joyful, peaceful, or sustainable place based on the technology that you implemented?</h5>
<p>Yes! Because our project could potentially help government to make better environmental policies or arrangements that can possibly reduce energy consumption:</p>
<ol type="1">
<li><p>Our world will become more sustainable if energy-saving strategies can be improved based on our prediction.</p></li>
<li><p>Households will be able to save more money if they adjust their energy consumption according to our prediction.</p></li>
</ol>
</section>
</section>
<section id="materials-and-methods" class="level3">
<h3 class="anchored" data-anchor-id="materials-and-methods">4. Materials and Methods</h3>
<section id="data" class="level4">
<h4 class="anchored" data-anchor-id="data">Data</h4>
<p>We retrieved our dataset from kaggle.com, “Hourly energy demand generation and weather”.The datasets contain four years of electrical consumption, pricing, and weather data in Spain.</p>
<p>Potential limitations: the dataset only contains data from five cities in Spain, which is more region-specific. If we were to generalize the patterns or adopt our model in other places, we may need to include data from more cities and from different countries, and fit them accordingly.</p>
</section>
<section id="approach" class="level4">
<h4 class="anchored" data-anchor-id="approach">Approach</h4>
<section id="what-features-of-your-data-you-used-as-predictors-for-your-models-and-what-features-if-any-you-used-as-targets." class="level5">
<h5 class="anchored" data-anchor-id="what-features-of-your-data-you-used-as-predictors-for-your-models-and-what-features-if-any-you-used-as-targets.">What features of your data you used as predictors for your models, and what features (if any) you used as targets.</h5>
<p><strong>Linear Regression:</strong></p>
<p>Predictor: Potential Features (filtered)</p>
<p>Target: total load actual</p>
<p>We used the Pearson correlation method to filter features with weak correlation (&lt; 0.2), and drop feature columns with weak correlation.</p>
<p><strong>Univariate Time Series Analysis:</strong></p>
<p>Predictor: total actual load a day ahead</p>
<p>Target: total load actual now</p>
</section>
<section id="whether-you-subset-your-data-in-any-way-and-for-what-reasons." class="level5">
<h5 class="anchored" data-anchor-id="whether-you-subset-your-data-in-any-way-and-for-what-reasons.">Whether you subset your data in any way, and for what reasons.</h5>
<p>We merged the two datasets by “time”, as we believed that both energy generation and weather may affect total load.</p>
</section>
<section id="what-models-you-used-trained-on-your-data-and-how-you-chose-them." class="level5">
<h5 class="anchored" data-anchor-id="what-models-you-used-trained-on-your-data-and-how-you-chose-them.">What model(s) you used trained on your data, and how you chose them.</h5>
<p>First, we chose the linear regression model to train on our data, as we believed that energy consumption might be affected by certain features such as weather, energy generation, and price, etc. So we use linear regression to examine the relationships between them.</p>
<p>We found the result of linear regression not very satisfactory. Then we think that since energy and weather data are recorded every hour, maybe we can do a time series analysis that predicts future energy consumption based on past data. So we tried another approach - univariate time series analysis - to predict energy consumption based on energy consumption in the past. We first only kept the energy consumption data (total actual load) and did train test split. Then, we created the predictor dataset: energy consumption of 24 hours past, and target dataset: energy consumption at current time. We used AutoRegressive model to fit our data, and calculated the mean absolute percentage error to evaluate the performance of the model.</p>
</section>
<section id="how-you-trained-your-models-and-on-what-hardware." class="level5">
<h5 class="anchored" data-anchor-id="how-you-trained-your-models-and-on-what-hardware.">How you trained your models, and on what hardware.</h5>
<p>We trained our models using sklearn package or statsmodel package on google colab on GPU.</p>
</section>
<section id="how-you-evaluated-your-models-loss-accuracy-etc-and-the-size-of-your-test-set." class="level5">
<h5 class="anchored" data-anchor-id="how-you-evaluated-your-models-loss-accuracy-etc-and-the-size-of-your-test-set.">How you evaluated your models (loss, accuracy, etc), and the size of your test set.</h5>
<p>We evaluated our linear regression model by getting its accuracy and computing cross-validation scores to make sure the model was not overfitted. Then we plotted the regression line to visualize how the model performed on the first 100 data points.</p>
<p>We evaluated our time series model by computing the mean absolute percentage error, and plotted the lines both predicted and actual load.</p>
</section>
<section id="if-you-performed-an-audit-for-bias-how-you-approached-this-and-what-metrics-you-used." class="level5">
<h5 class="anchored" data-anchor-id="if-you-performed-an-audit-for-bias-how-you-approached-this-and-what-metrics-you-used.">If you performed an audit for bias, how you approached this and what metrics you used.</h5>
<p>As our dataset contains records from five different cities in Spain, we wanted to make sure that there was no location bias. We made a barplot to compare the number of records for each city and found that the number of records for each city were similar. So our dataset does not have location bias.</p>
</section>
</section>
</section>
<section id="results" class="level3">
<h3 class="anchored" data-anchor-id="results">5. Results</h3>
<section id="linear-regression" class="level4">
<h4 class="anchored" data-anchor-id="linear-regression">Linear Regression</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Project_Blog_Post_files/figure-html/c3692850-84ef-4ff8-a0fc-d25137db2f97.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Screenshot 2023-05-14 at 9.46.12 PM.png</figcaption><p></p>
</figure>
</div>
<p>Our linear regression model achieved 63% accuracy. It is hard to determine whether the score indicated good performance or not based on the number itself, so we plotted the regression line and data points.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Project_Blog_Post_files/figure-html/3c753ed8-d4c0-4245-b2c4-3f909d78e388.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Screenshot 2023-05-14 at 9.22.45 PM.png</figcaption><p></p>
</figure>
</div>
<p>According to the plot, the data points are scattered evenly, vertically and horizontally across the region. This suggested that the linear regression model might not be the optimal model for the data.</p>
</section>
<section id="univariate-time-series-analysis" class="level4">
<h4 class="anchored" data-anchor-id="univariate-time-series-analysis">Univariate Time Series Analysis</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Project_Blog_Post_files/figure-html/934c8482-6e6e-49d2-ac99-7ea8524e5134.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Screenshot 2023-05-14 at 9.48.58 PM.png</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Project_Blog_Post_files/figure-html/0599d3ac-7a6f-4643-bb17-f801dbef80e0.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Screenshot 2023-05-14 at 9.48.48 PM.png</figcaption><p></p>
</figure>
</div>
<p>Our univariate times series analysis achieved the mean absolute percentage error of 13.55. Combined with the plot we have for actual and prediction data, the univariate time series analysis’s prediction seems to have a similar trend as the actual data, which indicated that the model was able to predict the energy consumption with a relatively better performance.</p>
</section>
</section>
<section id="concluding-discussion" class="level3">
<h3 class="anchored" data-anchor-id="concluding-discussion">6. Concluding Discussion</h3>
<p>Our project involves two models, which considers different aspects of prediction. The linear regression model predicts based on certain features, while the univariate time series model predicts based on past consumption data. We were able to train the models and carry out the scores / errors, so our project works for our goal.</p>
<p>We have met the goals we set at the beginning of the project– we have successfully created a code repository to showcase the machine learning pipeline to predict energy consumption, and have a satisfactory result. We have also tried out both a linear model and a nonlinear model and compared their results, and examined whether additional factors such as weather would affect the prediction.</p>
<p>We compared our results to others’ who used deep neural networks to perform prediction on similar questions on kaggle, and found that our mean absolute percentage error was a little higher. This might be because our model is not as complicated as the other ones that used deep neural networks.</p>
<p>If we had more time, data and computational resources, we would try implementing multivariate time series analysis to examine how other features may affect the consumption of energy.</p>
<p>We might also apply neural networks for our model. We might also use support vector machine for classification and regression.</p>
</section>
<section id="group-contributions-statement" class="level3">
<h3 class="anchored" data-anchor-id="group-contributions-statement">7. Group Contributions Statement</h3>
<p>We don’t have a specific part that one is in charge of. We meet every week and work on the models together on Google Colab. We modify the code together, so we cannot say exactly who worked on what part of the source code, we just worked together.</p>
<p>For the blog post, we also discussed and wrote the drafts together on google doc.</p>
</section>
<section id="personal-reflection" class="level3">
<h3 class="anchored" data-anchor-id="personal-reflection">8. Personal Reflection</h3>
<p>I learned a lot from the process of researching, implementing, and communicating about my project. First of all, I learned about what aspects I will need to consider when making a project, for example, in what ways can the result of the project benefit our society, and what can be the potential risks or negative sides. I also learned to make plans for the project every week in order to make sure that we are on track. Moreover, I learned the skills and technique I need to implement the project. Specificially, I taught myself how to implement univariate time series analysis. This is something not taught in class, and I managed to implement it with my teammate. In the process, teamwork is also strengthened. The project proposal, warm-ups, project presentation and the blog post all allowed me to learned to explain my approaches in a clear and concise way.</p>
<p>I feel that I learned a lot through the process, and I met the goals I set in my project proposal, but I did not exceed them. I did both linear model and nonlinear model (univariate time series analysis using autoregressive model), which matched my goal. I incorporated weather data to my features for prediction, which also matched my goal. I did not go beyond my goal, but if I had more time, I would try to implement deep neural networks for my project.</p>
<p>The experience of working on this project will definitely be helpful to my future courses, career stages, or even personal life. When working on some project, I will definitely start with a project proposal that clearly states the goals, possible benefits and drawbacks, and possible way of implementation. I will make plans on a weekly basis so that I do not procrastinate too much. I will constantly check the progress with my teammate when it comes to teamwork, and try to work out a solution together. Last but not least, I will not be afraid of having to take on new techniques in a short time for the project, since I know how to teach myself a new skill quickly.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-CHOU2018709" class="csl-entry" role="doc-biblioentry">
Chou, Jui-Sheng Chou, and Duc-Son Tran. 2018. <span>“Forecasting Energy Consumption Time Series Using Machine Learning Techniques Based on Usage Patterns of Residential Householders.”</span> <em>Energy</em> 165: 709–26.
</div>
<div id="ref-10.1145/3485128" class="csl-entry" role="doc-biblioentry">
Rolnick, David, Priya L. Donti, Lynn H. Kaack, Kelly Kochanski, Alexandre Lacoste, Kris Sankaran, Andrew Slavin Ross, et al. 2022. <span>“Tackling Climate Change with Machine Learning”</span> 55 (2). <a href="https://doi.org/10.1145/3485128">https://doi.org/10.1145/3485128</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>